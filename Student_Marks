package Student_details;
import java.util.HashMap;
import java.util.Map;
import java.util.Scanner;

public class StudentMarksManagement {
	
	    public static void main(String[] args) {
	        Scanner sc = new Scanner(System.in);

	        // Dictionary 1: roll number â†’ student details
	        HashMap<Integer, HashMap<String, Object>> students = new HashMap<>();

	        while (true) {
	            System.out.println("\n===== Student Marks Management System =====");
	            System.out.println("1. Add Student");
	            System.out.println("2. View All Students");
	            System.out.println("3. Search Student");
	            System.out.println("4. Update Subject Mark");
	            System.out.println("5. Delete Student");
	            System.out.println("6. Exit");
	            System.out.print("Enter your choice: ");

	            int choice = sc.nextInt();
	            sc.nextLine(); // clear buffer

	            // 1. Add Student
	            if (choice == 1) {
	                System.out.print("Enter Roll Number: ");
	                int roll = sc.nextInt();
	                sc.nextLine();

	                System.out.print("Enter Student Name: ");
	                String name = sc.nextLine();

	                HashMap<String, Double> marks = new HashMap<>();

	                System.out.print("Enter number of subjects: ");
	                int n = sc.nextInt();
	                sc.nextLine();

	                for (int i = 1; i <= n; i++) {
	                    System.out.print("Enter subject " + i + " name: ");
	                    String subject = sc.nextLine();

	                    System.out.print("Enter mark for " + subject + ": ");
	                    double mark = sc.nextDouble();
	                    sc.nextLine();

	                    marks.put(subject, mark);
	                }

	                HashMap<String, Object> details = new HashMap<>();
	                details.put("name", name);
	                details.put("marks", marks);

	                students.put(roll, details);
	                System.out.println("Student added successfully!");
	            }

	            // 2. View All Students
	            else if (choice == 2) {
	                if (students.isEmpty()) {
	                    System.out.println("No student records found.");
	                } else {
	                    for (Map.Entry<Integer, HashMap<String, Object>> entry : students.entrySet()) {
	                        int roll = entry.getKey();
	                        HashMap<String, Object> details = entry.getValue();

	                        String name = (String) details.get("name");
	                        HashMap<String, Double> marks =
	                                (HashMap<String, Double>) details.get("marks");

	                        double total = 0;
	                        for (double m : marks.values()) {
	                            total += m;
	                        }
	                        double percentage = total / marks.size();

	                        System.out.println("\nRoll Number: " + roll);
	                        System.out.println("Name: " + name);
	                        System.out.println("Marks:");
	                        for (Map.Entry<String, Double> m : marks.entrySet()) {
	                            System.out.println("  " + m.getKey() + " : " + m.getValue());
	                        }
	                        System.out.println("Total Marks: " + total);
	                        System.out.println("Percentage: " + String.format("%.2f", percentage) + " %");
	                    }
	                }
	            }

	            // 3. Search Student
	            else if (choice == 3) {
	                System.out.print("Enter Roll Number to search: ");
	                int roll = sc.nextInt();

	                if (students.containsKey(roll)) {
	                    HashMap<String, Object> details = students.get(roll);
	                    String name = (String) details.get("name");
	                    HashMap<String, Double> marks =
	                            (HashMap<String, Double>) details.get("marks");

	                    double total = 0;
	                    for (double m : marks.values()) {
	                        total += m;
	                    }
	                    double percentage = total / marks.size();

	                    System.out.println("Name: " + name);
	                    System.out.println("Marks:");
	                    for (Map.Entry<String, Double> m : marks.entrySet()) {
	                        System.out.println("  " + m.getKey() + " : " + m.getValue());
	                    }
	                    System.out.println("Total Marks: " + total);
	                    System.out.println("Percentage: " + String.format("%.2f", percentage) + " %");
	                } else {
	                    System.out.println("Student not found.");
	                }
	            }

	            // 4. Update Subject Mark
	            else if (choice == 4) {
	                System.out.print("Enter Roll Number: ");
	                int roll = sc.nextInt();
	                sc.nextLine();

	                if (students.containsKey(roll)) {
	                    HashMap<String, Double> marks =
	                            (HashMap<String, Double>) students.get(roll).get("marks");

	                    System.out.print("Enter subject name to update: ");
	                    String subject = sc.nextLine();

	                    if (marks.containsKey(subject)) {
	                        System.out.print("Enter new mark for " + subject + ": ");
	                        double newMark = sc.nextDouble();
	                        marks.put(subject, newMark);
	                        System.out.println("Mark updated successfully!");
	                    } else {
	                        System.out.println("Subject not found.");
	                    }
	                } else {
	                    System.out.println("Student not found.");
	                }
	            }

	            // 5. Delete Student
	            else if (choice == 5) {
	                System.out.print("Enter Roll Number to delete: ");
	                int roll = sc.nextInt();

	                if (students.containsKey(roll)) {
	                    students.remove(roll);
	                    System.out.println("Student record deleted.");
	                } else {
	                    System.out.println("Student not found.");
	                }
	            }

	            // 6. Exit
	            else if (choice == 6) {
	                System.out.println("Exiting program. Thank you!");
	                break;
	            }

	            else {
	                System.out.println("Invalid choice. Please try again.");
	            }
	        }

	        sc.close();
	    }
	}


